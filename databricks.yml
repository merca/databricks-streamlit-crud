bundle:
  name: databricks-streamlit-crud

include:
  - resources/*.yml

variables:
  catalog:
    description: Unity Catalog name
    default: main
    
  schema:
    description: Unity Schema name  
    default: default
    
  table_name:
    description: Unity Table name
    default: user_data

targets:
  # Development environment
  dev:
    mode: development
    default: true
    workspace:
      host: https://your-workspace.cloud.databricks.com
    variables:
      catalog: main_dev
      schema: ${workspace.current_user.short_name}
      
  # Staging environment  
  staging:
    mode: development
    workspace:
      host: https://your-workspace.cloud.databricks.com
    variables:
      catalog: main_staging
      schema: staging
      
  # Production environment
  prod:
    mode: production
    workspace:
      host: https://your-workspace.cloud.databricks.com
      # Uncomment and configure for production
      # root_path: /Shared/.bundle/prod/${bundle.name}
    run_as:
      # Production should run as a service principal
      service_principal_name: ${var.service_principal_id}
    variables:
      catalog: main
      schema: production

permissions:
  - level: CAN_MANAGE
    group_name: admins
  - level: CAN_VIEW  
    group_name: users